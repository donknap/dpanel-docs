# 域名转发

容器对外访问时，可以通过暴露容器内部端口的形式进行。暴露端口时会将容器内的某个端口映射到宿主的端口上。

比如，Nginx 容器内部的访问端口为 80，可以将宿主机的 8080 映射到该容器的 80 端口上。那么可以通过 http://服务器ip:8080 进行访问该容器。

但是在实际使用的大部分场景中，多以【域名】的形式来访问某个资源。\
这时候就需要利用 Nginx 之类的软件，通过反向代理的方式，将域名请求转发到某个容器中的某个端口。


### 标准版

> 在多环境中，只在安装了 dpanel 面板的环境支持域名转发功能

在 DPanel 标准版中，集成了 Nginx 与 Acme 软件。在安装时需要绑定容器的 80 及 443 端口。安装完成后，在【容器管理】中可以使用【域名转发】功能。

![domain-1.png](https://cdn.w7.cc/dpanel/domain-1.png)

### 反向代理

#### 转发到容器

当你通过【选择容器】功能添加转发容器后，面板会自动创建 dpanel-local 网络，并把转发目标容器与面板自身加入到该网络中。在转发配置中，则采用容器在 dpanel-local 网络中的 hostname 进行。

这样的好处是当你的目标容器 Ip 发生变化时也可以正常的转发。但是必须保证 dpanel 面板容器和目标容器在重建时必须添加至 dpanel-local 网络。

#### 通过自定义网络或是 bridge 网络

如果你的容器本身已经添加至某个自定义网络或是你想直接通过 bridge 网络进行转发，那么你在配置【转发目标】的时候可以直接指定容器在这自定义网络或是 bridge 网络中的 ip 或是 hostname。同样的道理，请保证 dpanel 面板也使终添加至该网络中。

#### 多环境下的转发

如果你添加了多个 docker 环境，在配置转发时可以通过 docker环境Ip:容器绑定端口 来实现转发功能。比如：在 192.168.0.13 的主机上部署了 Nginx 并绑定 80 到主机的 8080，那么转发目标 ip 为 192.168.0.13:8080。

在反向代理转发时可以转发到某一个 ip 也可以转发到某一个容器。当你选择【转发到容器】时，面板会将自身与目标容器添加到 dpanel-local 网络中，并通过 hostname 进行转发。

### 重定向

将某个域名重定向到目标域名或是 ip 上。